<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>Level Editor</title>
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
<h1>Editor</h1>
<nav>
  <ul>
    <li><a href="/">Home</a></li>
  </ul>
</nav>

<div data-view>...</div>

<script id="layer" type="text/ractive">
  <!--<div>{{ fps }}</div>-->
  <canvas class="layer"
  on-mousedown="mouseDown"
  on-mousemove="mouseMove" 
  on-mouseup="mouseUp" 
  width="400" height="400"></canvas>
</script>
<script id="layers" type="text/ractive">
  <div class="layersContainer">
  {{#layers:i}}
    <Layer layer="{{ layers[i] }}" tileImages="{{ tileImages }}" width="{{ width }}" toolId="{{ toolId }}"></Layer>
  {{/layers}}
  </div>
</script>

<script id="layerSelect" type="text/ractive">
  <ul>
  {{#layers:i}}
    <li><input type="checkbox" on-click="toggle:{{ i }}"><button on-click="select:{{ i }}">{{ layers[i].label }}</button></li>
  {{/layers}}
  </ul>
</script>
<script id="levelSelect" type="text/ractive">
  <ul>
  {{#levels:name}}
    <li>
      {{#isFetching}}
      ...
      {{/isFetching}}

      {{^isFetching}}
        {{#isError}}
        Error!!
        {{/isError}}

        {{^isError}}
        <button on-click="select:{{ name }}">
          <img class="thumbnail" src="/img/{{ thumbnail }}">{{ description }}
        </button>
        {{/isError}}
      {{/isFetching}}
    </li>
  {{/levels}}
  </ul>
</script>
<script id="tileSelect" type="text/ractive">
  {{#isFetching}}
  ...
  {{/isFetching}}
  {{^isFetching}}
  <ul>
    {{#tileImageUrls:i}}
    <li><img src="{{ tiles[0] }}" on-click="select:{{ i }}"></li>
    {{/tileImageUrls}}
  </ul>
  {{/isFetching}}
  <ul>
  </ul>
</script>

<script id="tileSheetSelect" type="text/ractive">
  <ul>
  {{#tileSheets:name}}
    <li>
      {{#isFetching}}
      ...
      {{/isFetching}}

      {{^isFetching}}
        {{#isError}}
        Error!!
        {{/isError}}

        {{^isError}}
        <button on-click="select">
          <img src="/data/assets/{{ thumbnail }}">{{ description }}
        </button>
        {{/isError}}
      {{/isFetching}}
    </li>
  {{/tileSheets}}
  </ul>
</script>

<script id="toolSelect" type="text/ractive">
  <ul>
    <li on-click="select:tileBrush">Tile Brush</li>
    <li on-click="select:eraser">Eraser</li>
    <li on-click="select:selector">Selector</li>
    <li on-click="select:fill">Fill</li>
  </ul>
</script>
<script id="levelSelectView" type="text/ractive">
  <LevelSelect levels="{{ state.levels.items }}"></LevelSelect>
</script>

<script id="levelView" type="text/ractive">
  <h2>{{ description }}</h2>
  <h3>Layers</h3>
  <LayerSelect layers="{{ state.layers.items }}"></LayerSelect>
  <Layers toolId="{{ state.tools.selectedId }}" layers="{{ state.layers.items }}" tileImages="{{ state.currentTileSet.tileImages }}"></Layers>
  <h3>Tools</h3>
  <ToolSelect></ToolSelect>
  <h3>Tiles</h3>
  <TileSheetSelect tileSheets="{{ state.tileSheets.items }}"></TileSheetSelect>
  <TileSelect tileImages="{{ state.currentTileSet.tileImages }}"></TileSelect>
</script>


<script src="/jspm_packages/system.js"></script>
<script src="/config.js"></script>
<script src="/js/bundles/babel.js"></script>
<script>
  System.import('/js/main.js');
</script>
<!---<script src="/js/bundle.js"></script>-->
<!--<script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>-->
</body>
</html>
